<h2 class="text-3xl font-bold mb-8 text-blue-700">📄 Tax Filing Form</h2>

<form class="space-y-10">

  <!-- Owner Information -->
  <section>
    <h3 class="text-xl font-semibold text-blue-600 mb-4 border-b pb-2">👤 Owner Information</h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
        <input [(ngModel)]="form.fullName" name="fullName" type="text" disabled
          class="w-full p-3 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Contact Number</label>
        <input [(ngModel)]="form.contactNumber" name="contactNumber" type="text" disabled
          class="w-full p-3 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
        <input [(ngModel)]="form.email" name="email" type="email" disabled
          class="w-full p-3 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed" />
      </div>
    </div>
  </section>

  <!-- Business Information -->
  <section>
    <h3 class="text-xl font-semibold text-green-600 mb-4 border-b pb-2">🏢 Business Information</h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Business ID</label>
        <input [(ngModel)]="form.businessId" name="businessId" type="text" required
          placeholder="e.g. 123-456789"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Business Name</label>
        <input [(ngModel)]="form.businessName" name="businessName" type="text" required
          placeholder="e.g. Acme Trading Inc."
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500" />
      </div>
      <div class="col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Business Address</label>
        <div class="flex rounded-md shadow-sm border border-gray-300 bg-white focus-within:ring-2 focus-within:ring-green-500">
          <input [(ngModel)]="form.businessAddress" name="businessAddress" type="text" readonly
            placeholder="Street, City, Province, ZIP"
            class="flex-1 p-3 text-gray-800 placeholder-gray-400 focus:outline-none rounded-l-md bg-transparent" />
          <button type="button" (click)="openMapModal()"
            class="px-4 bg-yellow-600 text-white rounded-r-md hover:bg-yellow-700 transition-colors">
            📍 Set Location
          </button>
        </div>
      </div>

      <!-- Map Modal -->
      <div *ngIf="showMapModal"
        class="fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center">
        <div class="bg-white p-6 rounded-xl shadow-xl w-full max-w-2xl">
          <app-business-address-map (addressSelected)="setAddress($event)"></app-business-address-map>
          <div class="flex justify-end mt-6">
            <button (click)="closeMapModal()"
              class="px-5 py-2 bg-red-500 text-white font-semibold rounded-md hover:bg-red-600">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Business Details -->
  <section>
    <h3 class="text-xl font-semibold text-purple-600 mb-4 border-b pb-2">📋 Business Details</h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Applicable Year</label>
        <input [(ngModel)]="form.forYear" name="forYear" type="number" required placeholder="e.g. 2025"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Business Code</label>
        <input [(ngModel)]="form.lineOfBusinessCode" name="lineOfBusinessCode" type="text" required
          placeholder="e.g. B123"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500" />
      </div>
      <div class="col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Line of Business</label>
        <input [(ngModel)]="form.lineOfBusiness" name="lineOfBusiness" type="text" required
          placeholder="e.g. Retail, Food & Beverage"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Plate No.</label>
        <input [(ngModel)]="form.plateNo" name="plateNo" type="text"
          placeholder="e.g. ABC-1234"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Permit No.</label>
        <input [(ngModel)]="form.permitNo" name="permitNo" type="text"
          placeholder="e.g. PER-45678"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Date Issued</label>
        <input [(ngModel)]="form.dateIssued" name="dateIssued" type="date"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Date Registered</label>
        <input [(ngModel)]="form.dateRegistered" name="dateRegistered" type="date"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500" />
      </div>
    </div>
  </section>

  <!-- Business Type and Workforce -->
  <section>
    <h3 class="text-xl font-semibold text-pink-600 mb-4 border-b pb-2">🏷️ Business Type & Workforce</h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Type of Business</label>
        <input [(ngModel)]="form.typeOfBusiness" name="typeOfBusiness" type="text" required
          placeholder="e.g. Sole Proprietorship, Corporation"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Number of Employees</label>
        <input [(ngModel)]="form.noOfEmployees" name="noOfEmployees" type="number" required
          placeholder="e.g. 15"
          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500" />
      </div>
    </div>
  </section>
  <!-- Deadline -->
<section>
  <h3 class="text-xl font-semibold text-red-600 mb-4 border-b pb-2">⏰ Filing Deadline</h3>
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Deadline</label>
      <input [(ngModel)]="form.deadline" name="deadline" type="date" required
        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500" />
    </div>
  </div>
</section>


  <!-- Submit Button -->
  <div class="flex justify-center mt-8">
    <button type="submit" (click)="submitForm()"
      class="px-8 py-3 bg-blue-700 text-white font-bold rounded-lg hover:bg-blue-800 focus:ring-4 focus:ring-blue-400 shadow-lg transition-all duration-150">
      🚀 Submit Filing
    </button>
  </div>

  <!-- Spinner -->
  <app-spinnner
    [navigating]="navigating"
    [spinnerMessage]="spinnerMessage">
  </app-spinnner>
</form>
